<!-- way_result.html -->

{% load static %}

<div class="container">
    <h2>Best Way Result</h2>

    <p>Start Point: {{ start_point.name }}</p>
    <p>End Point: {{ end_point.name }}</p>
    <p>Best Way: {{ best_way }} </p>

    <form method="get" action="{% url 'calculate_best_way' %}">
        <button type="submit">Return</button>
    </form>
</div>

<div>
    <img id="reloadableImage" src="{% static 'images/graph.jpg' %}?80172489074" alt="Map Graph">
    <script>
        // Function to reload the image on page refresh
        function reloadImageOnPageRefresh() {
            var imgElement = document.getElementById('reloadableImage');

            // Add a timestamp to the image URL to force a reload
            var timestamp = new Date().getTime();
            var imageUrl = imgElement.src + '?timestamp=' + timestamp;

            // Set the image source to the new URL
            imgElement.src = imageUrl;
        }

        // Call the reloadImageOnPageRefresh function when the page is being unloaded
        window.addEventListener('beforeunload', function() {
            reloadImageOnPageRefresh();
        });
    </script>
</div>
